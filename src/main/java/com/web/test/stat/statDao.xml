<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.web.test.stat.statDao">

<select id="select1MinStat" resultType="com.web.test.common.constants.CpuVo">
SELECT 
	 PID
	,YYMMDD 
	,TIMESTAMP
	,PARENT_NEID
	,NE_ID
	,SYSTYPE
	,VM_TYPE
	,VM_INDEX
	,VM_SIDE
	,ACT_STANDBY
	,IDLE
	,USR
	,IO_WAIT
	,USEDRATE
	,MIN_CPU
	,MAX_CPU
	,AVG_CPU
FROM
PT_ST_1MIN_CPU
</select>

<insert id="insert5MinStat">

INSERT INTO PT_ST_5MIN_CPU 
	( PID, YYMMDD, PARENT_NEID, TIMESTAMP, NE_ID, SYSTYPE, VM_TYPE, VM_INDEX,VM_SIDE, ACT_STANDBY, IDLE, SYS, USR, IO_WAIT, USEDRATE, MIN_CPU, MAX_CPU, AVG_CPU) 
SELECT PID, MAX(YYMMDD), PARENT_NEID,TIMESTAMP ,NE_ID,SYSTYPE ,
	VM_TYPE , VM_INDEX, VM_SIDE ,ACT_STANDBY,
	AVG(IDLE),AVG(SYS),AVG(USR),IO_WAIT,AVG(USEDRATE),AVG(MIN_CPU),
	AVG(MAX_CPU),AVG(AVG_CPU) 
	FROM 
PT_ST_1MIN_CPU 
	WHERE 
		YYMMDD BETWEEN '2020-05-28 14:45' AND '2020-05-28 14:50'
	GROUP BY PID, NE_ID ,PARENT_NEID , TIMESTAMP ,NE_ID,SYSTYPE , VM_TYPE , VM_INDEX, VM_SIDE ,ACT_STANDBY,IO_WAIT 
	
</insert>


<insert id="insertPcInfo" parameterType="Map">
${query}
</insert>







</mapper>